<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CHECKLIST FORM</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Kanit&display=swap");

      * {
        font-family: "Kanit", sans-serif;
        font-weight: 400;
        font-style: normal;
      }

      .border-text-input {
        border: 0px;
        border-radius: 5px;
      }

      .img-icon {
        width: 20px;
        height: 20px;
      }

      .font-size-form {
        font-size: 14px !important;
      }
    </style>
  </head>
  <body>
    <div class="mt-5"></div>
    <div id="navbar" class="container-fluid">
      <h1 class="text-center">CHECKLIST FORM</h1>
    </div>
    <div class="mt-5"></div>
    <div id="form" class="container">
      <form id="specForm" class="border p-3" style="border-radius: 20px">
        <div id="projectNameInput">
          <label for="projectName">ชื่อโครงการ: </label>
          <input id="projectName" class="form-control" type="text" />
        </div>
        <div class="mt-3"></div>
        <div id="projectInfoInput">
          <div class="row row-cols-2 text-center">
            <div class="col my-1">
              <input
                id="area"
                type="text"
                class="form-control bg-body-secondary bg-gradient text-center"
                placeholder=" พื้นที่ใช้สอยในบ้าน"
              />
            </div>
            <div class="col my-1">
              <input
                id="bedroom"
                type="text"
                class="form-control bg-body-secondary bg-gradient text-center"
                placeholder="ห้องนอน"
              />
            </div>
            <div class="col my-1">
              <input
                id="bathroom"
                type="text"
                class="form-control bg-body-secondary bg-gradient text-center"
                placeholder="ห้องน้ำ"
              />
            </div>
            <div class="col my-1">
              <input
                id="parking"
                type="text"
                class="form-control bg-body-secondary bg-gradient text-center"
                placeholder="ที่จอดรถ"
              />
            </div>
          </div>
        </div>
        <div class="mt-3"></div>
        <div id="systemInput" class="font-size-form">
          <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button
                  class="accordion-button"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseOne"
                  aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseOne"
                >
                  งานประปาและสุขาภิบาล
                </button>
              </h2>
              <div
                id="panelsStayOpen-collapseOne"
                class="accordion-collapse collapse show"
              >
                <div class="accordion-body">
                  <div class="row row-cols-4 text-center">
                    <div class="col-4">รายการ</div>
                    <div class="col-2">มี</div>
                    <div class="col-2">ไม่มี</div>
                    <div class="col-4">สเปก</div>
                  </div>
                  <hr />
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ถังบำบัดน้ำเสีย</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">บ่อพักดักกลิ่น</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ถังดักไขมัน</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ถังเก็บน้ำ/แทงค์น้ำ</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ปั้มน้ำอัตโนมัติ</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ระบบท่อปลวก</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseTwo"
                  aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseTwo"
                >
                  งานหลังคา
                </button>
              </h2>
              <div
                id="panelsStayOpen-collapseTwo"
                class="accordion-collapse collapse"
              >
                <div class="accordion-body">
                  <div class="row row-cols-4 text-center">
                    <div class="col-4">รายการ</div>
                    <div class="col-2">มี</div>
                    <div class="col-2">ไม่มี</div>
                    <div class="col-4">สเปก</div>
                  </div>
                  <hr />
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ประเภทหลังคา</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">โครงสร้างหลังคา</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">หลังคาโซลาร์เซลล์</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ฉนวนกันความร้อน</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">
                      ระบบระบายความร้อนใต้หลังคา
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ระบบท่อปลวก</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button
                  class="accordion-button collapsed"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseThree"
                  aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseThree"
                >
                  ระบบไฟฟ้า
                </button>
              </h2>
              <div
                id="panelsStayOpen-collapseThree"
                class="accordion-collapse collapse"
              >
                <div class="accordion-body">
                  <div class="row row-cols-4 text-center">
                    <div class="col-4">รายการ</div>
                    <div class="col-2">มี</div>
                    <div class="col-2">ไม่มี</div>
                    <div class="col-4">สเปก</div>
                  </div>
                  <hr />
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ขนาดมิเตอร์ไฟ</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">เบรกกเกอร์ไฟ</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">ระบบป้องกันไฟดูด</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">บล็อกไฟสำหรับ EV Charger</div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                  <div class="row row-cols-4 text-center mb-1 row-input">
                    <div class="col-4 item-name">
                      บล็อกไฟสำหรับสอเตอร์ประตูรั้วอัตโนมัติ
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="has-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-2">
                      <input
                        type="checkbox"
                        class="no-checkbox"
                        name=""
                        id=""
                        onclick="toggleInput(this)"
                      />
                    </div>
                    <div class="col-4">
                      <input
                        type="text"
                        style="width: 100%"
                        class="border-text-input bg-body-secondary bg-gradient"
                        disabled
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-3"></div>
        <div class="text-center">
          <button type="submit" class="btn btn-primary bg-gradient">
            บันทึก
          </button>
        </div>
        <div class="mt-3"></div>
        <div id="listProjects">
          <div
            class="bg-danger bg-gradient text-light text-center px-3 py-2"
            style="width: 100px; border-radius: 10px"
          >
            โครงการ
          </div>
          <div id="datas"></div>
        </div>
        <div class="mt-3"></div>
        <div id="comparison">
          <div
            class="bg-danger bg-gradient text-light text-center px-3 py-2"
            style="width: 250px; border-radius: 10px"
          >
            เปรียบเทียบโครงการที่คุณสนใจ
          </div>
          <div class="mt-3"></div>
          <div class="border p-3" style="border-radius: 20px"></div>
        </div>
      </form>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      function toggleInput(checkbox) {
        const row = checkbox.closest(".row");
        const hasCheckbox = row.querySelector(".has-checkbox");
        const noCheckbox = row.querySelector(".no-checkbox");
        const input = row.querySelector(".border-text-input");

        if (checkbox === hasCheckbox) {
          noCheckbox.checked = false;
          input.disabled = !hasCheckbox.checked;
          if (!hasCheckbox.checked) {
            input.value = "";
          }
        } else if (checkbox === noCheckbox) {
          hasCheckbox.checked = false;
          input.disabled = true;
          input.value = "";
        }
      }

      function deleteProject(projectId) {
        let projects = JSON.parse(localStorage.getItem("projects")) || [];
        projects = projects.filter((project) => project.id !== projectId);
        localStorage.setItem("projects", JSON.stringify(projects));
        document.getElementById(projectId).remove();
      }

      document
        .getElementById("specForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const projectName = document.getElementById("projectName").value;
          const rows = document.querySelectorAll(
            "#specForm .accordion-body .row-input"
          );
          const projectId = `project-${new Date().getTime()}`;

          let projectData = {
            id: projectId,
            name: projectName,
            items: [],
          };

          rows.forEach((row) => {
            // const item = row.cells[0].innerText;
            const item = row.querySelector(".item-name").innerText;
            const hasItem = row.querySelector(".has-checkbox").checked
              ? "มี"
              : "ไม่มี";
            const spec = row.querySelector(".border-text-input").value;
            // const spec = row.cells[3].querySelector("input").value;

            projectData.items.push({ item, hasItem, spec });
          });

          let projects = JSON.parse(localStorage.getItem("projects")) || [];
          projects.push(projectData);
          localStorage.setItem("projects", JSON.stringify(projects));

          addProjectToDOM(projectData);
          document.getElementById("specForm").reset();
          document.querySelectorAll(".border-text-input").forEach((element) => {
            element.disabled = true;
          });
        });

      function addProjectToDOM(projectData) {
        const bedroomValue = document.getElementById("bedroom").value;
        const bathroomValue = document.getElementById("bathroom").value;
        const areaValue = document.getElementById("area").value;
        const parkingValue = document.getElementById("parking").value;
        let data = `
        <div class="card mt-3" id="${projectData.id}">
          <div class="card-header d-flex justify-content-between align-items-center" id="heading${projectData.id}">
            <h5 class="mb-0">
              <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse${projectData.id}" aria-expanded="true" aria-controls="collapse${projectData.id}">
                ${projectData.name}
              </button>
            </h5>
            <button class="btn btn-danger btn-sm" onclick="deleteProject('${projectData.id}')">ลบ</button>
          </div>
          <div id="collapse${projectData.id}" class="collapse" aria-labelledby="heading${projectData.id}" data-parent="#datas">
            <div class="card-body">
              <div class="row row-cols-2 text-center">
                <div class="col my-1">พื้นที่ใช้สอย: ${areaValue} ตร.ม</div>
                <div class="col my-1">ห้องนอน: ${bedroomValue} ห้อง</div>                
                <div class="col my-1">ห้องน้ำ: ${bathroomValue} ห้อง</div>
                <div class="col my-1">ที่จอดรถ: ${parkingValue} ที่</div>
              </div>
              <table class="table">
                <thead>
                  <tr>
                    <th>รายการ</th>
                    <th>มี</th>
                    <th>ไม่มี</th>
                    <th>สเปค</th>
                  </tr>
                </thead>
                <tbody>
      `;

        projectData.items.forEach((itemData) => {
          data += `
          <tr>
            <td>${itemData.item}</td>
            <td>${itemData.hasItem === "มี" ? "✔" : ""}</td>
            <td>${itemData.hasItem === "ไม่มี" ? "✔" : ""}</td>
            <td>${itemData.spec}</td>
          </tr>
        `;
        });

        data += `
                </tbody>
              </table>
            </div>
          </div>
        </div>
      `;

        document.getElementById("datas").innerHTML += data;
      }

      function loadProjects() {
        let projects = JSON.parse(localStorage.getItem("projects")) || [];
        projects.forEach(addProjectToDOM);
      }

      document.addEventListener("DOMContentLoaded", loadProjects);
    </script>
  </body>
</html>
